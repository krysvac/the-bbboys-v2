<h1 style="margin-top: 30px;">Registrera konto</h1>

<form (ngSubmit)="onSubmit()" *ngIf="validToken" [formGroup]="registerForm">
    <div class="form-group">
        <label for="username">Användarnamn</label>
        <input aria-describedby="usernameHelpBlock" class="form-control" formControlName="username" id="username"
               placeholder="Sick_Steve_69" required type="text">
        <small class="form-text text-muted" id="usernameHelpBlock">
            Ditt användarnamn måste vara mellan 2-32 tecken långt och får bara innehålla A-Ö 0-9 _
        </small>
        <br *ngIf="username.invalid && (username.dirty || username.touched)">
        <div *ngIf="username.invalid && (username.dirty || username.touched)" class="alert alert-danger">
            <div *ngIf="username.errors.required">
                Ett användarnamn krävs!
            </div>
            <div *ngIf="username.errors.minlength">
                Ditt användarnamn måste vara minst 2 tecken!
            </div>
            <div *ngIf="username.errors.maxlength">
                Ditt användarnamn får inte vara längre än 32 tecken!
            </div>
            <div *ngIf="username.errors.forbiddenUsername && !username.errors.minlength &&
            !username.errors.required">
                Ogiltigt användarnamn. Ditt användarnamn får bara innehålla <strong>A-Ö 0-9 _</strong>
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="newPassword1">Nytt lösenord</label>
        <input aria-describedby="passwordHelpBlock" class="form-control" formControlName="newPassword1"
               id="newPassword1"
               placeholder="*********" required type="password">
        <small class="form-text text-muted" id="passwordHelpBlock">
            Ditt lösenord måste vara mellan 10-50 tecken långt och får bara innehålla A-Ö 0-9 ! @ # _ .
        </small>
        <br *ngIf="newPassword1.invalid && (newPassword1.dirty || newPassword1.touched)">
        <div *ngIf="newPassword1.invalid && (newPassword1.dirty || newPassword1.touched)" class="alert alert-danger">
            <div *ngIf="newPassword1.errors.required">
                Ett lösenord krävs!
            </div>
            <div *ngIf="newPassword1.errors.minlength">
                Ditt lösenord måste vara minst 10 tecken!
            </div>
            <div *ngIf="newPassword1.errors.maxlength">
                Ditt lösenord får inte vara längre än 50 tecken!
            </div>
            <div *ngIf="newPassword1.errors.forbiddenPassword && !newPassword1.errors.minlength &&
            !newPassword1.errors.required">
                Ogiltigt lösenord. Ditt lösenord får bara innehålla <strong>A-Ö 0-9 ! @ # _ .</strong>
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="newPassword2">Upprepa nytt lösenord</label>
        <input class="form-control" formControlName="newPassword2" id="newPassword2" placeholder="*********"
               required type="password">
        <br *ngIf="newPassword2.invalid && (newPassword2.dirty || newPassword2.touched)">
        <div *ngIf="newPassword2.invalid && (newPassword2.dirty || newPassword2.touched)" class="alert alert-danger">
            <div *ngIf="newPassword2.errors.required">
                Ett lösenord krävs!
            </div>
            <div *ngIf="newPassword2.errors.minlength">
                Ditt lösenord måste vara minst 10 tecken!
            </div>
            <div *ngIf="newPassword2.errors.maxlength">
                Ditt lösenord får inte vara längre än 50 tecken!
            </div>
            <div *ngIf="newPassword2.errors.forbiddenPassword && !newPassword2.errors.minlength &&
            !newPassword2.errors.required">
                Ogiltigt lösenord. Ditt lösenord får bara innehålla <strong>A-Ö 0-9 ! @ # _ .</strong>
            </div>
        </div>
    </div>
    <div *ngIf="registerForm.invalid && newPassword1.valid && newPassword2.valid" class="alert alert-danger">
      <span *ngIf="registerForm.errors.mismatch">
          Ditt nya lösenord matchar inte i båda fälten!
      </span>
    </div>
    <button [disabled]=" registerForm.invalid" class="btn btn-primary" type="submit">Skapa konto</button>
    <br *ngIf="registerError">
    <br *ngIf="registerError">
    <div *ngIf="registerError" class="alert alert-danger">{{registerErrorMsg}}</div>
</form>
